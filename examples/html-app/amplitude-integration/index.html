<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>
  </head>
  <!--
    Install the Amplitude Analytics SDK via script tag.
    Use the SDK hosted on unpkg.com to avoid ad blockers blocking downloading the SDK.
  -->
  <script type="text/javascript">
    (function(e,t){var r=e.amplitude||{_q:[],_iq:{}};var n=t.createElement("script")
    ;n.type="text/javascript"
    ;n.crossOrigin="anonymous";n.async=true
    ;n.src="https://unpkg.com/amplitude-js@8.18.4/amplitude.umd.min.js"
    ;n.onload=function(){if(!e.amplitude.runQueuedFunctions){
      console.log("[Amplitude] Error: could not load SDK")}}
    ;var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)
    ;function i(e,t){e.prototype[t]=function(){
      this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}
      var o=function(){this._q=[];return this}
      ;var a=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"]
      ;for(var c=0;c<a.length;c++){i(o,a[c])}r.Identify=o;var u=function(){this._q=[]
        ;return this}
      ;var p=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]
      ;for(var l=0;l<p.length;l++){i(u,p[l])}r.Revenue=u
      ;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId","setLibrary","setTransport"]
      ;function v(e){function t(t){e[t]=function(){
        e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}
        for(var r=0;r<d.length;r++){t(d[r])}}v(r);r.getInstance=function(e){
        e=(!e||e.length===0?"$default_instance":e).toLowerCase()
        ;if(!Object.prototype.hasOwnProperty.call(r._iq,e)){r._iq[e]={_q:[]};v(r._iq[e])
        }return r._iq[e]};e.amplitude=r})(window,document);

    // TODO Replace API_KEY with your analytics api key.
    amplitude.getInstance().init("API_KEY");

    /**
     * User ID, device ID, and identified user properties are used by the
     * Experiment SDK in the fetch request.
     */
    amplitude.getInstance().setUserId('user@company.com');
    amplitude.getInstance().setUserProperties({ premium: true });
  </script>

  <!--
    Install the Amplitude Experiment SDK via script tag.
  -->
  <script src="https://unpkg.com/@amplitude/experiment-js-client@1.5.6/dist/experiment.umd.js"></script>
  <script>
    /**
     * Initialize the experiment client with the Amplitude Analytics integration
     * and set a variable on the window.
     */
    // TODO Replace DEPLOYMENT_KEY with your own deployment
    window.experiment = Experiment.Experiment.initializeWithAmplitudeAnalytics('DEPLOYMENT_KEY', { debug: true });
  </script>
  </script>
  <body>
    <h2>Amplitude Experiment Browser Example - Basic</h2>

    <p>Click "Fetch" to fetch variants, then "Variant" or "All" to access variants from the SDK.</p>
    <p>Open the console to view debug output from the SDK.</p>

    <button onclick="window.experiment.fetch()">
      Fetch
    </button>

    <!-- TODO Replace FLAG_KEY with your flag key -->
    <button onclick="
      const variants = window.experiment.variant('FLAG_KEY');
      document.getElementById('output').innerText = JSON.stringify(variants);
    ">Variant</button>

    <button onclick="
      const variants = window.experiment.all();
      document.getElementById('output').innerText = JSON.stringify(variants);
    ">All</button>

    <br />

    <pre id="output"></pre>
  </body>
</html>
